{% extends 'base.html' %}
{% load static %}


{% block tezone-content %}
    <div class="my_container">
        <h2 class="title-section-text" style="text-align: center; margin-top: 40px; color: black; font-weight: 500; font-size: 38px;">Категории</h2>
        <div class="main-page-category" style="margin-top: 50px;">
            {% for category in sub_categories %}
                <div style="display: flex; justify-content: center; align-items: center">
                    <a href="{% url "category_detail" id=category.id %}" style=" text-decoration: none; color: black;    min-width: 220px;
    width: 220px;
    min-height: 80px;
    padding: 12px;
    margin-right: 20px;
    background: #fff;
    border-radius: 4px;
    box-shadow: 0 1px 4px rgb(0 0 0 / 16%);">
                        <div style="display: flex; align-items: center; flex-direction: row; justify-content: flex-start; width: 100%; height: 100%">
                             <img src="{{ category.image.url }}" width="56" height="56">
                            <p style="font-weight: 400; font-size: 16px;margin-left: 12px; margin-top: 10%">{{ category.name }}</p>
                        </div>
                    </a>
                </div>
            {% endfor %}
        </div>
        <div style="background-color: #7474BF; width: 100%; height: 2px; margin-top: 20px;"></div>
        <div style="display: flex; flex-direction: row; margin-top: 20px; width: 100%; height: 100%; flex-wrap: wrap">
            <div style="display: flex; width: 312px">
                {% for product in products %}
                <div class="element-after" style="box-shadow: 0 1px 4px rgb(0 0 0 / 16%); display: flex; flex-direction: column; justify-content: space-between; position: relative; max-width: 100%; min-width: 100%">
                    <div>
                        <div style="background: #fff; padding: 20px; height: auto; width: 100%">
                            <div style="position: relative">
                                <div style="position: relative; height: 100%">
                                    <div style="position: static;
    margin: 0 auto;
    overflow: hidden;
    list-style: none;
    padding: 0;">
                                        <div style="display: flex; z-index: 1; width: 100%; height: 100%; position: relative; box-sizing: content-box">
                                            <a href="{% url "product_detail" id=product.id %}" style="width: 272px;     display: block;
    position: relative;
    border-radius: 6px;
    overflow: hidden;padding: 100% 0 0;height: 100%; flex-shrink: 0;">
                                                <img src="{{ product.image.url }}" style="display: block;max-width: 100%; max-height: 100%;position: absolute;top:0;left:0; margin: 0;">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; margin-top: 12px">
                                <div style="color: #1e0602; display: inline-flex; flex-direction: row-reverse;">
                                    <div style="color: #1e0602; margin: 0; font-weight: 700; font-size: 24px; line-height: 1.25; ">
                                        <span style="    white-space: nowrap;
    page-break-inside: avoid;
    break-inside: avoid-page;">
                                            <span style="font-size: 20px; line-height: 1.3">от</span>
                                            {{ product.price }}
                                            <span style="font-size: 20px; line-height: 1.3">₽</span><span style="font-size: 20px; line-height: 1.3">/м<sup>2</sup></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <a href="{% url "product_detail" id=product.id %}" style="padding-right: 0; text-decoration: none;
    margin-right: 0;
    text-align: left;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;    overflow: hidden;
    position: relative;
    max-height: 36px;    color: #1e0602;
    margin-top: 4px;    font-size: 15px;
    line-height: 18px;">
                                {{ product.title }}
                            </a>
                            <div style="display: flex; margin-top: 12px;">
                                <div style="display: inline-block; ">
                                    <span style="font-size: 14px; line-height: 18px; display: inline-block; color: #979797; margin-right: 6px;">
                                        Размер плитки
                                    </span>
                                    <span>
                                        <span style="    font-size: 14px;
    line-height: 18px;color: #1e0602;">{{ product.size }}&nbsp;см</span>
                                    </span>
                                </div>
                            </div>
                            {% if product not in request.user.customer.cart.products.all %}
                            <a href="{% url "add-cart" id=product.id %}" class="btn btn-primary" style="margin-top: 12px; width: 100%; background-color: #7474BF; border: 0; font-size: 18px;" >
                                В корзину
                            </a>
                            {% else %}
                                <a class="btn btn-primary" style="margin-top: 12px; width: 100%; background-color: #9d9df0; border: 0; font-size: 18px; color: white" >
                                В корзине
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock tezone-content %}